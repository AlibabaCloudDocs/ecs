# CreateElasticityAssurance

You can call this operation to create an elasticity assurance.

## Description

Elasticity Assurance provides a new method to purchase and use resources with flexibility and assurance. It offers an assured resource reservation for pay-as-you-go instances. Pay-as-you-go ECS instances covered by the elasticity assurance can be successfully purchased within the term of the elasticity assurance.

-   Elasticity assurances are not refundable after purchase.
-   Elasticity assurances are applicable only to pay-as-you-go ECS instances.
-   Currently, only the unlimited mode is enabled for elasticity assurances. The `AssuranceTimes` parameter can be set only to `Unlimited`. The unlimited mode is automatically enabled when the elasticity assurance takes effect.

## Debugging

[OpenAPI Explorer automatically calculates the signature value. For your convenience, we recommend that you call this operation in OpenAPI Explorer. OpenAPI Explorer dynamically generates the sample code of the operation for different SDKs.](https://api.aliyun.com/#product=Ecs&api=CreateElasticityAssurance&type=RPC&version=2014-05-26)

## Request parameters

|Parameter|Type|Required|Example|Description|
|---------|----|--------|-------|-----------|
|Action|String|Yes|CreateElasticityAssurance|The operation that you want to perform. Set the value to CreateElasticityAssurance. |
|RegionId|String|Yes|cn-hangzhou|The ID of the region in which to create the elasticity assurance. You can call the [DescribeRegions](~~25609~~) operation to query the most recent region list. |
|ZoneId.N|RepeatList|Yes|cn-hangzhou-h|The ID of zone N in which to create the elasticity assurance. |
|InstanceType.N|RepeatList|Yes|ecs.c6.xlarge|Instance type N. You can create an elasticity assurance for only one instance type. |
|Period|Integer|No|0|The term of the elasticity assurance. The unit of the Period value is based on the `PeriodUnit` value. Valid values:

-   When the `PeriodUnit` parameter is set to `Month`, the valid values of the Period parameter are 1, 2, 3, 4, 5, 6, 7, 8, and 9.
-   When the `PeriodUnit` parameter is set to `Year`, the valid values of the Period parameter are 1, 2, 3, 4, and 5. |
|PeriodUnit|String|No|0|The unit of the term. Valid values:

-   Month
-   Year |
|ClientToken|String|No|0c593ea1-3bea-11e9-b96b-88e9fe637760|The client token that is used to ensure the idempotence of the request. You can use the client to generate the value, but you must make sure that it is unique among different requests. The `ClientToken` value can only contain ASCII characters and cannot exceed 64 characters in length. For more information, see [How to ensure idempotence](~~25693~~). |
|PrivatePoolOptions.Name|String|No|eapTestName|The name of the elasticity assurance. The name must be 2 to 128 characters in length can contain letters, digits, colons \(:\), underscores \(\_\), and hyphens \(-\). It must start with a letter and cannot start with `http://` or `https://`. |
|Description|String|No|This is description.|The description of the elasticity assurance. The description must be 2 to 256 characters in length and cannot start with `http://` or `https://`.

This parameter is empty by default. |
|PrivatePoolOptions.MatchCriteria|String|No|Open|The match mode of the private pool generated by the elasticity assurance. Valid values:

-   Open: An open private pool is used.
-   Target: A specified private pool is used.

Default value: Open. |
|AssuranceTimes|String|No|Unlimited|The total number of times that the elasticity assurance can be applied. Set the value to Unlimited. Currently, only the unlimited mode is supported for an elasticity assurance within the term.

Default value: Unlimited. |
|InstanceAmount|Integer|No|2|The total number of instances that need to be reserved for a single instance type. |
|StartTime|String|No|2020-10-30T06:32:00Z|The time when the elasticity assurance takes effect. The default value is the time when the CreateElasticityAssurance operation is called to create the elasticity assurance. Specify the time in the ISO 8601 standard in the `yyyy-MM-ddTHH:mm:ssZ` format. The time must be in UTC. For more information, see [ISO 8601](~~25696~~). |

## Response parameters

|Parameter|Type|Example|Description|
|---------|----|-------|-----------|
|OrderId|String|1234567890|The ID of the order. |
|PrivatePoolOptionsId|String|eap-bp67acfmxazb4\*\*\*\*|The ID of the elasticity assurance. |
|RequestId|String|473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E|The ID of the request. |

## Examples

Sample requests

```
https://ecs.aliyuncs.com/?Action=CreateElasticityAssurance
&RegionId=cn-hangzhou
&InstanceType.1=ecs.c6.xlarge
&ZoneId.1=cn-hangzhou-h
&InstanceAmount=2
&<Common request parameters>
```

Sample success responses

`XML` format

```
<CreateElasticityAssuranceResponse>
      <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>
      <PrivatePoolOptionsId>eap-bp67acfmxazb4****</PrivatePoolOptionsId>
      <OrderId>1234567890</OrderId>
</CreateElasticityAssuranceResponse>
```

`JSON` format

```
{
    "RequestId": "473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E",
    "PrivatePoolOptionsId": "eap-bp67acfmxazb4****",
    "OrderId": "1234567890"
}
```

## Error codes

|HTTP status code|Error code|Error message|Description|
|----------------|----------|-------------|-----------|
|400|MissingParameter.RegionId|The specified RegionId should not be null.|The error message returned because the RegionId parameter is not specified.|
|400|InvalidStartTime.NotSupported|The specified StartTime should be within 180 calendar days from the current date, and you must specify a precision to hour.|The error message returned because the specified StartTime parameter is invalid.|
|400|InvalidStartTime.MalFormed|The specified StartTime is out of the permitted range.|The error message returned because the specified StartTime parameter exceeds the upper limit.|
|500|InternalError|The request processing has failed due to some unknown error, exception or failure.|The error message returned because an internal error has occurred. Try again later. If the problem persists, submit a ticket.|

For a list of error codes, visit the [API Error Center](https://error-center.alibabacloud.com/status/product/Ecs).

