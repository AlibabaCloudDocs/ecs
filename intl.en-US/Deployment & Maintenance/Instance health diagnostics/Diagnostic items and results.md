# Diagnostic items and results

The instance health diagnostics feature is a self-diagnostic method that allows you to diagnose the system, network, and disk status of an Elastic Compute Service \(ECS\) instance at any time. This can help you understand the health status of the instance and identify and resolve common issues in a timely manner. This topic describes the diagnostic items supported by this feature and provides the diagnostic scope and results for your reference.

## Diagnostic items

The instance health diagnostics feature checks the following items:

-   Diagnostic items for **Comprehensive Check**
    -   [Diagnostics of instance service health](#section_oav_k4f_xnb): diagnoses the underlying resources and virtualization layer of an instance to ensure that the underlying services of the instance run normally.
    -   [Diagnostics of instance configuration management](#section_yot_0si_16g): checks whether an instance is blocked by an operation from starting or running normally.
    -   [Diagnostics of instance disk health](#section_roy_dyi_lm5): checks whether exceptions exist in the system disk of an instance.
    -   [Diagnostics of instance network health](#section_y8n_x3z_eqz) checks the status of network components in an instance and whether exceptions exist in the external network environment.
    -   [Diagnostics of configurations in the instance operating system \(Linux\)](#section_q1u_k7l_wmn): checks whether the system files, key processes, use status of common ports, and firewalls in the instance operating system are normal.
    -   [Diagnostics of configurations in the instance operating system \(Windows\)](#section_mba_oud_1s5): checks whether the use status of common ports and the status of firewalls in the instance operating system are normal.
    -   [Diagnostics of billing](#section_3e1_d4e_2cf): checks whether you have overdue payments for an instance and its associated components, such as public IP address and elastic IP address \(EIP\).
    -   [Diagnostics of security group rules](#section_65s_ccd_dqr): checks whether inbound traffic on common ports is allowed in all the security groups to which an instance belongs.
-   Diagnostic items for **Network Exception Occured**:
    -   [Diagnostics of network status](#section_iyj_5yl_a9i): checks the status of network components in an instance, network-related settings in the operating system, and exceptions in the external network environment.

## Diagnostics of instance service health

|Diagnostic item used in the ECS console|Diagnostic item used in API operations|Description|Diagnostic scope|
|---------------------------------------|--------------------------------------|-----------|----------------|
|Insufficient Resources|Instance.ResourceNotEnough|The instance cannot be started due to insufficient CPU or memory resources.|Check whether the physical CPU or memory resources required by the instance are sufficient. If the physical resources are insufficient, the instance cannot be started. You can wait a few minutes and try again, or you can create another instance in another zone or region.|
|Instance System Check Timeout|Instance.CheckTimeOut|The check on the instance system management channel timed out.|Check whether the check on the components at the underlying virtualization layer of the instance times out. If the check times out, the current command may fail to be run. You must try to run the command again.|
|Instance System Exception|Instance.SystemException|A fault such as a kernel panic, out of memory \(OOM\) exception, or internal downtime occurred in the instance system.|Check whether a fault such as kernel panic, OOM exception, or internal downtime exists in the guest OS of the instance operating system. The failure may be caused by the improper configurations of the instance or of the user programs in the guest OS. You can restart the instance for troubleshooting.|
|Instance Virtualization Exception|Instance.VirtException|The instance stopped responding or was unexpectedly stopped at runtime.|Check whether an exception exists in the core services at the underlying virtualization layer of the instance. If an exception exists, the instance may stop responding or be unexpectedly stopped. You can restart the instance for troubleshooting.|
|Alerts for the Instance Host|Instance.HostDownAlert|Alerts were triggered on the physical device that hosts the instance.|Check whether a fault exists in the underlying physical machine where the instance resides. If a fault exists in the physical server, the running status or performance of the instance may be affected. You can restart the instance for troubleshooting.|
|Instance Performance Limited|Instance.PerfRestrict|The burstable instance is in standard mode.|Check whether the CPU credits of the burstable instance are sufficient to maintain the current performance. If the CPU credits are insufficient, the instance cannot burst its performance and can deliver only baseline performance during peak hours.|
|Instance CPU Exception|Instance.CPUException|An exception occurred because the instance competed for CPUs or because CPUs failed to be bound to a dedicated instance.|Check whether the dedicated instance cannot obtain CPUs because shared instances compete for CPUs at the underlying layer or because other exceptions occur. You can restart the instance for troubleshooting.|
|Instance Management System Error|Instance.ControllerError|An exception occurred in the backend management system of the instance.|Check whether the backend management system of the instance is working normally. If the system is not working normally, exceptions may occur in the instance. You can restart the instance for troubleshooting.|

## Diagnostics of instance configuration management

|Diagnostic item used in the ECS console|Diagnostic item used in API operations|Description|Diagnostic scope|
|---------------------------------------|--------------------------------------|-----------|----------------|
|Instance Startup Abnormal|Instance.BootFailure|The instance cannot be started by the management system.|Check whether you can perform the boot operation on the instance for loading. If you cannot perform the boot operation on the instance for loading, you must create another one.|
|Core Operation Failure|Instance.OperationFailure|The operation that you performed on the instance failed.|Check whether operations that you recently performed on the instance succeed. The operations include starting, stopping, and upgrading the configurations of the instance. If the operations fail, you must perform the operations again.|
|Instance Image Loading Failure|Instance.ImageLoadFailure|The image used by the instance cannot be loaded normally.|Check whether the image used by the instance can be loaded normally at startup. The image may fail to be loaded due to system or image problems. You can restart the instance for troubleshooting.|

## Diagnostics of instance disk health

|Diagnostic item used in the ECS console|Diagnostic item used in API operations|Description|Diagnostic scope|
|---------------------------------------|--------------------------------------|-----------|----------------|
|Instance Disk I/O Hang|Instance.IOHang|A disk I/O hang occurred, which prevents you from reading data from or writing data to the disk.|Check whether a disk I/O hang occurs in the system disk of the instance. The file system in the disk is unstable or down due to high read and write I/O latency, which can cause the instance to fail to run normally. If an I/O hang occurs in a disk, you cannot read data from or write data to the disk. We recommend that you check the performance metrics of the disk. For more information, see [View the monitoring data of a cloud disk](/intl.en-US/Block Storage/Cloud disks/View the monitoring data of a cloud disk.md). For information about how to check Alibaba Cloud Linux 2 for I/O hangs, see [Detect I/O hangs of file systems and block layers](/intl.en-US/Images/Alibaba Cloud Linux 2/Features and interfaces supported by Alibaba Cloud Linux 2/Detect I/O hangs of file systems and block layers.md).|
|Instance Disk Loading Failure|Instance.DiskLoadFailure|An error occurred when you create or attach a disk.|Check whether the disk can be attached when the instance is started. If the attach operation fails, the instance may fail to start. Stop the instance and then start it again. You can also re-attach the disk. For information about how to attach a disk, see [Attach a data disk](/intl.en-US/Block Storage/Cloud disks/Attach a data disk.md).|
|Instance Disk Read/Write Limited|Instance.DiskLimit|The I/O latency of the disk in the instance is high or the upper limit of the disk IOPS has been reached.|Check whether read and write I/O latency exists in the system disk of the instance and whether the maximum read and write IOPS of the disk has been reached. If the maximum read and write IOPS of the disk has been reached, the read and write operations on the disk are limited. For more information about how to view disk metrics, see [View the monitoring data of a cloud disk](/intl.en-US/Block Storage/Cloud disks/View the monitoring data of a cloud disk.md). To avoid the preceding issues, reduce the read and write frequency of the disk or upgrade the disk for higher performance. For more information about the read and write performance metrics of various types of disks, see [EBS performance](/intl.en-US/Block Storage/Performance/EBS performance.md). |
|Instance Disk Resizing Failure|Instance.ResizeFsFailure|After the disk is resized, the size of the file system cannot be adjusted.|Check whether the size of the file system in the system disk of the instance is also adjusted after the system disk is resized. If the size of the file system cannot be adjusted, the disk fails to be resized due to insufficient resources or other reasons. The disk cannot be used. You must resize the disk again. For information about how to resize disks in various operating systems and the limits that apply when you resize disks, see [Overview](/intl.en-US/Block Storage/Resize cloud disks/Overview.md).|

## Diagnostics of instance network health

|Diagnostic item used in the ECS console|Diagnostic item used in API operations|Description|Diagnostic scope|
|---------------------------------------|--------------------------------------|-----------|----------------|
|Instance Link Layer Error|Instance.ArpPingError|An exception occurred at the link layer of the network interface controllers \(NICs\) of the instance.|Check whether the Address Resolution Protocol \(ARP\) ping fails at the underlying link layer of the instance. If the ARP ping fails, the network connectivity of the instance is affected. You can restart the instance for troubleshooting.|
|Instance Network Loading Failure|Instance.NetworkLoadFailure|An exception occurred while loading the NIC of the instance.|Check whether the NIC of the instance can be loaded normally. If the NIC cannot be loaded normally, the network connectivity of the instance is affected. For example, you cannot connect to the instance. You can restart the instance for troubleshooting.|
|Packet Loss of Instance Device|Instance.PacketDrop|Packet loss occurred in the inbound or outbound direction of the NIC.|Check whether packet loss occurs in the inbound or outbound direction of the NIC. If packet loss exists, the network connectivity or throughput of the instance is affected. For example, you cannot connect to the instance, or the network speed is slow. You can restart the instance for troubleshooting.|
|Network Session Error|Instance.NetworkSessionError|NIC sessions cannot be established or the maximum number of sessions has been reached.|Check whether sessions can be established on the NIC of the instance. If sessions cannot be established on the NIC or if the maximum number of sessions has been reached, the network connectivity or throughput of the instance is affected. For example, you cannot connect to the instance, or the network speed is slow. You can restart the instance for troubleshooting.|
|ICMP Ping Failed|Instance.ICMPPingError|The Internet Control Message Protocol \(ICMP\) ping failed.|Check whether the ICMP ping fails at the underlying link layer of the instance. If the ICMP ping fails, the network connectivity of the instance is affected. You can restart the instance for troubleshooting.|
|Check the Protection Status Against DDoS Attacks|Instance.DDoSStatus|Check the protection status of the instance and check whether the public IP address of the instance receives DDoS attacks.|Check whether the IP address of the instance receives DDoS attacks. For more information about DDoS attacks, see [Introduction to DDoS attacks](/intl.en-US/DDoS Protection Guide/Introduction to DDoS attacks.md). The free Anti-DDoS Origin service provided by Alibaba Cloud can help you scrub attack traffic to an extent and mitigate the unavailability caused by DDoS attacks. If the attack traffic exceeds the protection capability of your instance, the instance still enters the unavailable state and cannot be accessed. You can purchase other anti-DDoS services to protect your instance against DDoS attacks. For more information, see [Overview of Alibaba Cloud Anti-DDoS Origin](/intl.en-US/Product Introduction on Alibaba DDoS Protection/Overview.md).

For more information, see [Best practices for mitigating DDoS attacks](/intl.en-US/DDoS Protection Guide/Best practices for mitigating DDoS attacks.md). |
|Limited Burstable Bandwidth|Instance.NetworkBurstLimit|Check whether the burst bandwidth of the instance is limited.|Check the burst bandwidth of the instance. If the burst bandwidth of the instance exceeds the upper limit of burst bandwidth allowed for the instance type, your business is bottlenecked by network performance. We recommend that you upgrade the instance to an instance type that provides higher bandwidth capabilities. For information about burst bandwidth capabilities of various instance types, see [Instance families](/intl.en-US/Instance/Instance families.md). For information about how to change an instance type, see [Change instance types](/intl.en-US/Instance/Change configurations/Overview of instance upgrade and downgrade.md). |
|Network Traffic Throttled|Instance.NetworkBoundLimit|Check whether the total internal and public bandwidths of the instance have reached the maximum bandwidth allowed for the instance type.|Check the total internal and public bandwidths of the instance. If the total internal and public bandwidths exceed the upper limit of the baseline bandwidth allowed for the instance type, your business is bottlenecked by network performance. We recommend that you upgrade the instance to an instance type that provides higher bandwidth capabilities. For information about baseline bandwidth capabilities of various instance types, see [Instance families](/intl.en-US/Instance/Instance families.md). For information about how to change an instance type, see [Change instance types](/intl.en-US/Instance/Change configurations/Overview of instance upgrade and downgrade.md). |

## Diagnostics of billing

|Diagnostic item used in the ECS console|Diagnostic item used in API operations|Description|Diagnostic scope|
|---------------------------------------|--------------------------------------|-----------|----------------|
|Check Whether the Subscription Instance has Expired|Instance.ExpirationStop|Check whether your purchased subscription instance expires.|If the billing method of your instance is subscription, check whether the instance expires. After your instance expires, the instance is stopped and cannot be accessed. For information about changes to the resource status, see [Subscription](/intl.en-US/Pricing/Billing methods/Subscription.md). You must renew the instance to recover the service.|
|Check Whether the Pay-as-you-go Instance is Stopped due to an Overdue Payment|Instance.AccountUnbalancedStop|Check whether your purchased pay-as-you-go instance is stopped due to overdue payments.|If the billing method of your instance is pay-as-you-go, check whether you have overdue payments within your account. If you have overdue payments, the instance is stopped and cannot be accessed. For information about changes to the resource status after you have overdue payments within your account, see [Pay-as-you-go](/intl.en-US/Pricing/Billing methods/Pay-as-you-go.md). You must manually reactivate the instance after you add funds to your account.|
|Check Whether the Instance Components Have Overdue Payments|Instance:AccountUnbalancedPerformanceImpact|Check whether the disks or bandwidth of the instance become unavailable due to overdue payments within your account.|Check whether the pay-as-you-go disks attached to the instance or the bandwidth become unavailable due to overdue payments within your account. If you have overdue payments for instance components, the access to the instance is also affected. You must add funds to your account.|

## Diagnostics of security group rules

|Diagnostic item used in the ECS console|Diagnostic item used in API operations|Description|Diagnostic scope|
|---------------------------------------|--------------------------------------|-----------|----------------|
|Check Status of Commonly Used Ports|Instance.SGIngress|Check whether inbound traffic on common ports is allowed in the security group to which an instance belongs.|Check whether inbound traffic on common ports is allowed in the security group to which an instance belongs. If traffic on the common ports is denied, some services may not run normally, or the instance cannot be accessed. Allow inbound traffic on the following common ports:-   SSH port 22
-   RDP port 3389 |

## Diagnostics of configurations in the instance operating system \(Linux\)

|Diagnostic item used in the ECS console|Diagnostic item used in API operations|Description|Diagnostic scope|
|---------------------------------------|--------------------------------------|-----------|----------------|
|High Total CPU Utilization|GuestOS.CPUUtilHigh|The CPU utilization of the instance has exceeded 80%. The result is based on the top command output.|Check the total CPU utilization of the instance. If the CPU utilization is high, you must identify the processes that use large amounts of CPU resources and determine whether the processes are normal. For information about how to query the usage of CPU resources, see [Query and perform case study on CPU loads in a Linux instance](https://www.alibabacloud.com/help/faq-detail/41225.htm). |
|Check Inodes in Disks|GuestOS.DiskInodes|Check whether the inodes in the disk are sufficient.|Check the inode usage of the disk of the instance. If the usage is high, new files may fail to be created on the disk. Resize your disk based on your requirements. For more information, see [Resize disks online for Linux instances](/intl.en-US/Block Storage/Resize cloud disks/Resize disks online for Linux instances.md) and [Resize disks offline for Linux instances](/intl.en-US/Block Storage/Resize cloud disks/Resize disks offline for Linux instances.md). |
|Check DHCP Configuration of the eth0 NIC|GuestOS.DHPCStatus|Check whether network-related processes exist when Dynamic Host Configuration Protocol \(DHCP\) is configured. If no processes exist, the IP address may be lost after the lease expires.|Check the DHCP process of the eth0 NIC on the instance. If the DHCP process does not exist, the IP address of the instance may fail to be renewed after the lease expires, which causes network interruptions. For information about how to enable the DHCP process, see [Linux network processes do not exist](https://www.alibabacloud.com/help/doc-detail/175434.htm). |
|Check Devices in fstab|GuestOS.FstabDevices|Check whether the fstab file contains devices that do not exist.|Check the /etc/fstab file in the instance. If the /etc/fstab file contains devices that do not exist, the instance may fail to start. For more information, see [Remove a block device that does not exist from the /etc/fstab file of a Linux instance](https://www.alibabacloud.com/help/doc-detail/174563.htm). |
|Check Mount Status of Devices in fstab|GuestOS.FstabMount|Check whether devices in the fstab file are correctly attached.|Check the /etc/fstab file in the instance. If devices are not configured to be automatically attached in the /etc/fstab file, these devices cannot be directly used after the instance is restarted. You must run the mount command to manually attach the devices or configure the devices to be automatically attached in the /etc/fstab file.|
|Check Fstab File Format|GuestOS.FstabFormat|Check whether the content of fstab is correctly formatted.|Check the /etc/fstab file in the instance. If the /etc/fstab file is incorrectly formatted, the instance may fail to start.|
|Check System Firewall Status|GuestOS.FirewallStatus|Check whether the system firewall is enabled.|Check the firewall of the instance. If the firewall is enabled for your instance and has rules configured to block external access, you may fail to connect to the instance. For information about how to enable and disable a firewall, see [Enable or disable the system firewall in a Linux instance](https://www.alibabacloud.com/help/doc-detail/175507.htm). |
|Check System File Status|GuestOS.FilesystemState|Check the status of critical system files.|fsck diagnostics identifies exceptions in the file systems of the instance, which may cause data loss and lead to problems such as instance access failure. For information about how to check and repair file systems, see [Check and repair the file systems in a Linux instance](https://www.alibabacloud.com/help/doc-detail/175509.htm). |
|Check Limits Configuration|GuestOS.Limits|Check whether the limits configuration is correct.|Check the /etc/security/limits.conf file in the instance. If the `nofile` value in the /etc/security/limits.conf file exceeds the maximum allowed value, the instance may fail to be connected. For information about how to modify the limits system parameter, see [Adjust the limits system parameter in a Linux instance](https://www.alibabacloud.com/help/doc-detail/175515.htm). |
|Check Memory Configuration|GuestOS.MemoryHugePage|Check whether the configured huge page size is large.|Check the etc/sysctl.conf file in the instance. If the number of huge pages and the size of huge pages configured in the etc/sysctl.conf file are large, the amount of huge page size may exceed the total memory size of the instance. The amount of huge page size is calculated based on the following formula: Number of huge pages × Size of huge pages. For information about how to adjust the huge page size, see [Adjust the huge page size in a Linux instance](https://www.alibabacloud.com/help/doc-detail/174957.htm). |
|Check Listening Status of Common Ports|GuestOS.NetworkPorts|Check whether common ports such as port 22 and port 3389 are listened.|Check the common ports of the instance. If the common ports are not listened, applications in the instance may fail to be accessed. For information about how to check and modify common ports, see [Start a common service and query whether a port is listened on a Linux instance](https://www.alibabacloud.com/help/doc-detail/173894.htm). |
|Processes with CPU Utilization Exceeding 50%|GuestOS.ProcessUtilHigh|The CPU utilization of the instance has exceeded 50%. The result is based on the top command output.|Check the CPU utilization of the processes on the instance. If the CPU utilization of some processes is high, check whether the processes are normal. For information about how to check the CPU utilization, see [Query and perform case study on CPU loads in a Linux instance](https://www.alibabacloud.com/help/faq-detail/41225.htm). |
|High Single-CPU Utilization|GuestOS.WinSingleCoreUtilHigh|The single-CPU utilization has exceeded 85%. The result is based on the top command output.|Check the single-CPU utilization of the instance over a period of time. If the single-CPU utilization is high, you must identify the processes that use larger amounts of CPU resources and determine whether the processes are normal. For information about how to check the CPU utilization, see [Query and perform case study on CPU loads in a Linux instance](https://www.alibabacloud.com/help/faq-detail/41225.htm). |
|Check the Startup Status of Key System Processes|GuestOS.SystemProcessOn|Check whether critical system processes are started.|Check the critical system processes of the instance. If the critical system processes are not in the Running state, the instance may fail to be accessed. For information about how to start a common process, see [Start a common service and query whether a port is listened on a Linux instance](https://www.alibabacloud.com/help/faq-detail/173894.htm). |
|Check Kernel Parameters Within the NAT Environment|GuestOS.SysctlIPv4|Check whether the kernel parameters in the NAT environment are valid.|Check the kernel parameters related to the NAT environment in the instance. If exceptions exist in the kernel parameters related to the NAT environment, you cannot use SSH to connect to the instance, and exceptions occur when you access the HTTP service in the instance. Check and adjust the net.ipv4.tcp\_tw\_recycle and net.ipv4.tcp\_timestamps values in /etc/sysctl.conf. For information about how to fix kernel parameters in the NAT environment, see [An exception occurs when you access a Linux instance in the NAT environment due to kernel configuration issues in Linux](https://www.alibabacloud.com/help/faq-detail/41297.htm). |
|Check TCP SACK Configurations|GuestOS.SysctlTCPSack|Check whether TCP SACK is enabled.|Check whether TCP SACK is enabled for the instance. If TCP SACK is disabled, the network performance of the instance may be affected. For more information, see [Enable TCP SACK on a Linux instance](https://www.alibabacloud.com/help/faq-detail/174562.htm). |
|Check Whether the Operating System is OOM|GuestOS.SystemOOM|Check whether an OOM issue occurs in the operating system.|Check whether an OOM issue occurs in the operating system of the instance. If an OOM issue occurs, check whether the amount of available memory in the instance is sufficient to support the business that runs on the instance. If the amount of available memory is insufficient, upgrade the configurations of the instance to increase the memory size. For information about how to analyze the root cause of an OOM issue and troubleshoot the issue, see [Method for handling the OOM issue that occurs in a Linux instance](https://www.alibabacloud.com/help/faq-detail/174959.htm). |
|Check Critical System File Formats|GuestOS.SystemFilesFormat|Check the format of critical system files.|Check whether the critical system files in the instance are in the Unix format. If the critical system files in the instance are not in the Unix format, the instance may fail to be connected. For more information, see [Change the format of a file in a Linux instance to Unix](https://www.alibabacloud.com/help/faq-detail/175516.htm). |
|Check SELinux Status|GuestOS.SelinuxStatus|Check whether SELinux is enabled.|Check whether the SELinux service is enabled on the instance. If SELinux is enabled, an error is reported when you use SSH to connect to the instance. You can temporarily or permanently disable SELinux. For information about how to disable SELinux, see [SSH cannot be used to connect to a Linux instance because SELinux is enabled](https://www.alibabacloud.com/help/faq-detail/41481.htm). |
|Check passwd Configuration|GuestOS.SystemUsersPwd|Check whether a password is configured for the root account in Linux or the administrator account in Windows.|Check the critical user for the operating system of the instance. If no critical user exists for the operating system, you may not be able to log on to the instance. Check the status and password settings of the critical user in /etc/passwd. For information about how to check the critical user, see [No critical user exists for the operating system of a Linux instance](https://www.alibabacloud.com/help/faq-detail/175511.htm). |
|Check SSH Access Permissions|GuestOS.SSHPermission|Check whether the SSH access permissions are correctly configured.|Check the SSH access permissions of the instance. If the SSH access permissions are incorrectly configured, you may not be able to log on to the instance. For information about how to modify the SSH access permissions, see [Exceptions to the access permissions on SSH may cause failures to connect to a Linux instance](https://www.alibabacloud.com/help/faq-detail/175512.htm). |
|Check SSH Critical File Systems|GuestOS.SSHFiles|Check whether the critical files or directories for SSH access exist.|Check the critical files or directories that are required by SSH. If the critical files or directories required by SSH do not exist, you may not be able to use SSH to log on to the instance. For information about how to fix critical files or directories required by SSH, see [Check whether a Linux instance contains the files or directories that are required by SSH](https://www.alibabacloud.com/help/faq-detail/175513.htm). |
|Check Whether SSH Allows Root Logon|GuestOS.SSHRootUser|Check whether SSH root access is enabled.|Check whether SSH root access is enabled. If SSH root access is disabled, the Permission denied, please try again error message is returned when you attempt to use SSH to log on to the instance as the root user. For information about how to fix the error, see [The "Permission denied, please try again" error message is prompted when you use SSH to log on to a Linux instance as the root user](https://www.alibabacloud.com/help/faq-detail/41487.htm). |
|Check TCP Backlog Overflow|GuestOS.TCPBacklog|Check whether the TCP backlog overflows.|Check the TCP backlog of the instance. If the TCP backlog overflows, SYN connections start to be dropped. This may affect the network performance of the Linux instance and cause logon failures. We recommend that you modify the TCP backlog parameters of the application or the TCP backlog parameters in the /etc/sysctl.conf file based on your requirements. For more information, see [Failure to connect to a Linux instance because the TCP backlog cache overflows](https://www.alibabacloud.com/help/faq-detail/41487.htm). |
|Check UDP Buffer Overflow|GuestOS.UDPDropped|Check whether the UDP buffer overflows.|Check the UDP buffer of the instance. If the UDP buffer overflows, UDP packets start to be dropped. This may affect the network performance of the Linux instance and cause logon failures. Adjust the net.ipv4.udp\_mem value in the /etc/sysctl.conf file of the instance based on your requirements. For more information, see [Failure to connect to a Linux instance because the UDP buffer of the instance overflows](https://www.alibabacloud.com/help/faq-detail/175207.htm). |
|Check NIC Multi-queue Status|GuestOS.VirtioNetMultiqueue|Check whether NIC multi-queue is enabled.|Check whether NIC multi-queue is enabled for the NICs of the instance. If NIC multi-queue is disabled, the network performance of the instance may be affected. For more information, see [Configure NIC multi-queue](https://www.alibabacloud.com/help/doc-detail/52559.htm). |

## Diagnostics of configurations in the instance operating system \(Windows\)

|Diagnostic item used in the ECS console|Diagnostic item used in API operations|Description|Diagnostic scope|
|---------------------------------------|--------------------------------------|-----------|----------------|
|Check Windows Operating System Version|GuestOS.WinOSInfo|Microsoft no longer provides support for Windows Server 2008 and earlier.|Check the Windows version of the instance. Alibaba Cloud and Microsoft no longer provide support for Windows 2008 and earlier. We recommend that you install an operating system that is later than Windows Server 2008. For more information, see [Replace a system disk \(non-public images\)](/intl.en-US/Block Storage/Cloud disks/Change the operating system/Replace a system disk (non-public images).md) and [Replace the system disk \(public images\)](/intl.en-US/Block Storage/Cloud disks/Change the operating system/Replace the system disk (public images).md). |
|High Total CPU Utilization|GuestOS.WinCPUUtilHigh|The overall Windows CPU utilization has exceeded 85%.|Check the CPU utilization of the instance. If the total CPU utilization is high, you must identify the processes that use larger amounts of CPU resources and determine whether the processes are normal. For information about how to check the CPU utilization, see [Method for troubleshooting the issue of high CPU utilization in a Windows instance](https://www.alibabacloud.com/help/zh/doc-detail/41045.htm). |
|High Single-CPU Utilization|GuestOS.WinSingleCoreUtilHigh|Check whether the single-CPU utilization has exceeded 80%.|Check the CPU utilization of the instance. If the single-CPU utilization is high, you must identify the processes that use larger amounts of CPU resources and determine whether the processes are normal. For information about how to check the CPU utilization, see [Method for troubleshooting the issue of high CPU utilization in a Windows instance](https://www.alibabacloud.com/help/doc-detail/41045.htm). |
|Check Common Windows Service Port Status|GuestOS.WinNetworkPorts|Check whether port 3389 is enabled in Windows.|Check port 3389 of the instance. If port 3389 is disabled, Remote Desktop Services cannot be used to access the instance. For information about how to enable port 3389 to allow remote desktop connections, see [Enable Remote Desktop Services on a Windows instance](https://www.alibabacloud.com/help/doc-detail/174587.htm). |
|Check Windows NIC Status|GuestOS.WinNetworkInterfaces|Check whether the NICs of the Windows instance are enabled.|Check the NIC of the instance. If the NIC is unavailable, the instance cannot be connected. For information about how to check and repair a NIC, see [The NIC of a Windows instance is unavailable](https://www.alibabacloud.com/help/doc-detail/174212.htm). |
|Check Windows Virtual Disk Driver Status|GuestOS.WinVirtIO|Check the version of the virtio driver.|Check the virtio driver version of the instance. If the virtio driver is of an earlier version, the disk attached to the instance cannot be resized online. You can upgrade the virtio driver to a later version. For more information, see [Update Red Hat virtio drivers of Windows instances](https://www.alibabacloud.com/help/doc-detail/113322.htm). |
|Check Disk Capacity|GuestOS.WinVolumeSpace|Check whether the available capacity of system disk C:\\ is smaller than 1 GB.|Check the available space of system disk C:\\ of the instance. If the available space is smaller than 1GB, the system may run slowly or the instance may be unable to start. For more information, see [Resize disks online for Linux instances](/intl.en-US/Block Storage/Resize cloud disks/Resize disks online for Linux instances.md) and [Resize disks offline for Linux instances](/intl.en-US/Block Storage/Resize cloud disks/Resize disks offline for Linux instances.md). |
|Check Windows Firewall Status|GuestOS.FirewallStatus|Check whether the Windows firewall is enabled.|Check the firewall of the instance. If the firewall is enabled, services on the instance may not be accessed. Adjust the firewall policy settings based on your requirements. For more information, see [Configure a firewall policy for an instance that runs Windows Server](https://www.alibabacloud.com/help/faq-detail/40699.htm). |

## Diagnostics of network status

|Diagnostic item used in the ECS console|Diagnostic item used in API operations|Description|Diagnostic scope|
|---------------------------------------|--------------------------------------|-----------|----------------|
|Instance Link Layer Error|Instance.ArpPingError|An exception occurred at the link layer of the NIC of the instance.|Check whether the ARP ping fails at the underlying link layer of the instance. If the ARP ping fails, the network connectivity of the instance is affected. You can restart the instance for troubleshooting.|
|Instance Network Loading Failure|Instance.NetworkLoadFailure|An exception occurred while loading the NIC of the instance.|Check whether the NIC of the instance can be loaded normally. If the NIC cannot be loaded normally, the network connectivity of the instance is affected. For example, you cannot connect to the instance. You can restart the instance for troubleshooting.|
|Network Session Error|Instance.NetworkSessionError|NIC sessions cannot be established or the maximum number of sessions has been reached.|Check whether sessions can be established on the NIC of the instance. If sessions cannot be established on the NIC or the maximum number of sessions has been reached, the network connectivity or throughput of the instance is affected. For example, you cannot connect to the instance, or the network speed is slow. You can restart the instance for troubleshooting.|
|Packet Loss of Instance Device|Instance.PacketDrop|Packet loss occurred in the inbound or outbound direction of the NIC.|Check whether packet loss occurs in the inbound or outbound direction of the NIC. If packet loss exists, the network connectivity or throughput of the instance is affected. For example, you cannot connect to the instance, or the network speed is slow. You can restart the instance for troubleshooting.|
|ICMP Ping Failed|Instance.ICMPPingError|The ICMP ping failed.|Check whether the ICMP ping fails at the underlying link layer of the instance. If the ICMP ping fails, the network connectivity of the instance is affected. You can restart the instance for troubleshooting.|
|Check Status of Commonly Used Ports|Instance.SGIngress|Whether inbound traffic on common ports is allowed in the security group to which an instance belongs.|Check whether inbound traffic on common ports is allowed in the security group to which an instance belongs. If traffic on the common ports is denied, some services may not run normally, or the instance cannot be accessed. Allow inbound traffic on the following common ports:-   SSH port 22
-   RDP port 3389 |
|Check DHCP Configuration of the eth0 NIC|GuestOS.DHPCStatus|Check whether network-related processes exist when DHCP is configured. If no processes exist, the IP address may be lost after the lease expires.|Check the DHCP process of the eth0 NIC on the instance. If the DHCP process does not exist, the IP address of the instance may fail to be renewed after the lease expires, which causes network interruptions. For information about how to enable the DHCP process, see [Linux network processes do not exist](https://www.alibabacloud.com/help/doc-detail/175434.htm). |
|Check Listening Status of Common Ports|GuestOS.NetworkPorts|Check whether port 3389 is enabled in Windows.|Check the common ports of the instance. If the common ports are not listened, applications in the instance may fail to be accessed. For information about how to check and modify common ports, see [Start a common service and query whether a port is listened on a Linux instance](https://www.alibabacloud.com/help/doc-detail/173894.htm). |
|Check Kernel Parameters Within the NAT Environment|GuestOS.SysctlIPv4|Check whether the kernel parameters in the NAT environment are valid.|Check the kernel parameters related to the NAT environment in the instance. If exceptions exist in the kernel parameters related to the NAT environment, you cannot use SSH to connect to the instance and may encounter exceptions when you access the HTTP service in the instance. Check and adjust the net.ipv4.tcp\_tw\_recycle and net.ipv4.tcp\_timestamps values in /etc/sysctl.conf. For information about how to fix kernel parameters in the NAT environment, see [An exception occurs when you access a Linux instance in the NAT environment due to kernel configuration issues in Linux](https://www.alibabacloud.com/help/faq-detail/41297.htm). |
|Check TCP SACK Configurations|GuestOS.SysctlTCPSack|Check whether TCP SACK is enabled.|Check whether TCP SACK is enabled for the instance. If TCP SACK is disabled, the network performance of the instance may be affected. For more information, see [Enable TCP SACK on a Linux instance](https://www.alibabacloud.com/help/faq-detail/174562.htm). |
|Check TCP Backlog Overflow|GuestOS.TCPBacklog|Check whether the TCP backlog overflows.|Check the TCP backlog of the instance. If the TCP backlog overflows, SYN connections start to be dropped. This may affect the network performance of the Linux instance and cause logon failures. We recommend that you modify the TCP backlog parameters of the application or the TCP backlog parameters in the /etc/sysctl.conf file. For more information, see [Failure to connect to a Linux instance because the TCP backlog cache overflows](https://www.alibabacloud.com/help/faq-detail/41487.htm). |
|Check UDP Buffer Overflow|GuestOS.UDPDropped|Check whether the UDP buffer overflows.|Check the UDP buffer of the instance. If the UDP buffer overflows, UDP packets start to be dropped. This may affect the network performance of the Linux instance and cause logon failures. Adjust the net.ipv4.udp\_mem value in the /etc/sysctl.conf file of the instance based on your requirements. For more information, see [Failure to connect to a Linux instance because the UDP buffer of the instance overflows](https://www.alibabacloud.com/help/faq-detail/175207.htm). |
|Check NIC Multi-queue Status|GuestOS.VirtioNetMultiqueue|Check whether NIC multi-queue is enabled.|Check whether NIC multi-queue is enabled for the NIC of the instance. If NIC multi-queue is disabled, the network performance of the instance may be affected. For more information, see [Configure NIC multi-queue](https://www.alibabacloud.com/help/doc-detail/52559.htm). |
|Check the Protection Status Against DDoS Attacks|Instance.DDoSStatus|Check the protection status of the instance and check whether the public IP address of the instance receives DDoS attacks.|Check whether the IP address of the instance receives DDoS attacks. For more information about DDoS attacks, see [Introduction to DDoS attacks](/intl.en-US/DDoS Protection Guide/Introduction to DDoS attacks.md). The free Anti-DDoS Origin service provided by Alibaba Cloud can help you scrub attack traffic to an extent and mitigate the unavailability caused by DDoS attacks. If the attack traffic exceeds the protection capability of your instance, the instance still enters the unavailable state and cannot be accessed. You can purchase other anti-DDoS services to protect your instance against DDoS attacks. For more information, see [Overview of Alibaba Cloud Anti-DDoS Origin](/intl.en-US/Product Introduction on Alibaba DDoS Protection/Overview.md).

For more information, see [Best practices for mitigating DDoS attacks](/intl.en-US/DDoS Protection Guide/Best practices for mitigating DDoS attacks.md). |
|Network Traffic Throttled|Instance.NetworkBurstLimit|Check whether the total internal and public bandwidths of the instance have reached the maximum bandwidth allowed for the instance type.|Check the total internal and public bandwidths of the instance. If the total internal and public bandwidths exceed the upper limit of the baseline bandwidth allowed for the instance type, your business is bottlenecked by network performance. We recommend that you upgrade the instance to an instance type that provides higher bandwidth capabilities. For information about baseline bandwidth capabilities of various instance types, see [Instance families](/intl.en-US/Instance/Instance families.md). For information about how to change an instance type, see [Change instance types](/intl.en-US/Instance/Change configurations/Overview of instance upgrade and downgrade.md). |
|Limited Burstable Bandwidth|Instance.NetworkBoundLimit|Check whether the burst bandwidth of the instance is limited.|Check the burst bandwidth of the instance. If the burst bandwidth of the instance exceeds the upper limit of burst bandwidth allowed for the instance type, your business is bottlenecked by network performance. We recommend that you upgrade the instance to an instance type that provides higher bandwidth capabilities. For information about burst bandwidth capabilities of various instance types, see [Instance families](/intl.en-US/Instance/Instance families.md). For information about how to change an instance type, see [Change instance types](/intl.en-US/Instance/Change configurations/Overview of instance upgrade and downgrade.md). |

