# 导出镜像

创建自定义镜像后，您可以导出镜像到OSS存储空间（OSS Bucket），并下载到本地使用。本文介绍导出自定义镜像的操作步骤及相关注意事项。

-   自定义镜像所在地域中已有可用的OSS Bucket。

    若尚未创建OSS Bucket，请先[创建存储空间](/cn.zh-CN/快速入门/控制台快速入门/创建存储空间.md)。

    **说明：** 导出自定义镜像会产生一定的OSS存储和下载的流量费用。计费详情，请参见[概述](/cn.zh-CN/计量计费/计量项和计费项/概述.md)。

-   待导出的自定义镜像满足以下限制条件：
    -   不是基于镜像市场镜像创建的自定义镜像。
    -   不能包含Windows Server系列操作系统。
    -   不能包含四块以上数据盘快照，单块数据盘容量最大不能超过500GiB。

        **说明：** 如果单块数据盘的容量超过500 GiB，请先将该盘中的数据分散转移到多个小于500 GiB的数据盘中，再使用小于500 GiB的数据盘创建和导出自定义镜像。


导出自定义镜像的注意事项如下：

-   导出镜像所需时间取决于自定义镜像文件的大小和当前导出任务的并发数，需要您耐心等待。
-   导出的自定义镜像包含数据盘快照时，您的OSS Bucket中会出现多个文件。

    文件名带有system的表示系统盘快照，文件名带有data的表示数据盘快照。数据盘快照会有与数据盘对应的标识，即数据盘的挂载点，如xvdb或者xvdc。

-   使用导出的全镜像创建相同配置的Linux系统时，您需要确认/etc/fstab中记录的文件设备是否与导出的数据盘快照信息互相对应。
-   如果创建自定义镜像时云盘内无数据，那么导出镜像后解压缩也无数据。
-   导出后的镜像不能保证在其他平台正常启动，但您可以挂载镜像中的磁盘获取数据。

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。

2.  在左侧导航栏，选择**实例与镜像** \> **镜像**。

3.  在顶部菜单栏左上角处，选择地域。

4.  授权ECS服务访问OSS的权限。

    1.  找到要导出的目标镜像，在**操作**栏，单击![更多操作](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2403222061/p171570.png)图标，然后单击**导出镜像**。

    2.  在导出镜像对话框，单击提示信息里的**确认地址**。

        ![导出镜像](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0173559951/p4655.png)

    3.  在云资源访问授权对话框，单击**同意授权**授权ECS服务访问您的OSS资源。

5.  在左侧导航栏，选择**实例与镜像** \> **镜像**。

6.  在**自定义镜像列表**页签，找到目标镜像，在**操作**列，再次单击**更多** \> **导出镜像**。

7.  在导出镜像对话框，配置如下参数。

    -   选择镜像导出的格式，支持RAW、VHD、QCOW2、VDI和VMDK。

        **说明：** 选择镜像导出格式功能在部分地域可用，更多地域正在逐步开放中。

    -   选择一个与自定义镜像所属地域相同的OSS Bucket。
    -   为自定义镜像的Object名称设置一个前辍。例如，将Demo设为前辍，则导出自定义镜像文件后，在OSS Bucket中的名称即为Demo-\[系统自动生成的文件名\]。
8.  单击**确定**，开始导出自定义镜像。

    在任务完成前，您都可以通过[任务管理](https://ecs.console.aliyun.com/#/task/region/cn-qingdao)，在相应地域下找到导出自定义镜像的任务，取消导出自定义镜像。


下载自定义镜像。具体操作步骤，请参见[下载自定义镜像文件](/cn.zh-CN/控制台用户指南/文件管理/下载文件.md)。

**说明：** 如果您选择RAW作为镜像格式，导出后镜像文件扩展名默认为.raw.tar.gz，解压后扩展名为.raw。如果您的本地计算机为Mac OS X系统，推荐您使用gnu-tar解压工具。

**相关文档**  


[ExportImage](/cn.zh-CN/API参考/镜像/ExportImage.md)

[CancelTask](/cn.zh-CN/API参考/其他接口/CancelTask.md)

