# 通过Workbench远程连接Windows实例

相比VNC，Workbench支持多用户远程连接同一台实例，更加高效便捷。

确保实例满足连接条件。

-   在控制台完成以下操作：
    -   创建实例。
    -   为实例设置登录密码。
    -   使实例进入运行中状态。
-   实例内部配置符合以下要求：
    -   如果通过终端连接（SSH）连接实例：
        -   开启SSHD的远程服务，例如Windows系统中的Cygwin SSHD服务或WinSSHD服务。
        -   开放终端连接端口，通常为22端口。
    -   如果通过远程桌面（RDP）连接实例：
        -   开启远程桌面服务，例如Windows系统中的远程桌面服务。
        -   开放远程桌面端口，通常为3389端口。
    -   如果使用非管理员用户登录Windows实例，该用户需要属于Remote Desktop Users组。

确保实例所在安全组中已添加安全组规则，允许远程连接组内实例。

-   如需连接专有网络实例，请在**安全组规则**页面的**入方向**页签添加安全组规则，如下表所示。

    |授权策略|优先级|协议类型|端口范围|授权对象|
    |----|---|----|----|----|
    |**允许**|1|**自定义TCP**|根据实例开放的端口指定端口范围：     -   实例开放了3389端口：选择**RDP\(3389\)**。
    -   实例开放了其他端口：手动输入实例开放的端口。
|根据连接方式添加授权对象：     -   通过实例的公网IP（包括固定公网IP和EIP）连接：添加47.96.60.0/24和118.31.243.0/24。
    -   通过实例的专有网络私网IP连接：添加100.104.0.0/16。
**说明：** 您也可以添加0.0.0.0/0，但存在安全风险，请谨慎使用。 |

-   如需通过公网连接经典网络实例，请在**安全组规则**页面的**公网入方向**页签添加安全组规则，如下表所示。

    |授权策略|优先级|协议类型|端口范围|授权对象|
    |----|---|----|----|----|
    |**允许**|1|**自定义TCP**|根据实例开放的端口指定端口范围：     -   实例开放了3389端口：选择**RDP\(3389\)**。
    -   实例开放了其他端口：手动输入实例开放的端口。
|通过实例的公网IP（包括固定公网IP和EIP）连接：添加47.96.60.0/24和118.31.243.0/24。 **说明：** 您也可以添加0.0.0.0/0，但存在安全风险，请谨慎使用。 |

-   如需通过内网连接经典网络实例，请在**安全组规则**页面的**入方向**页签添加安全组规则，如下表所示。

    |授权策略|优先级|协议类型|端口范围|授权对象|
    |----|---|----|----|----|
    |**允许**|1|**自定义TCP**|根据实例开放的端口指定端口范围：     -   实例开放了3389端口：选择**RDP\(3389\)**。
    -   实例开放了其他端口：手动输入实例开放的端口。
|通过实例的经典网络内网IP连接：添加11.195.184.0/24和11.246.55.0/24。 **说明：** 为内网入方向规则添加0.0.0.0/0存在高安全风险，不建议使用。 |


Workbench的远程连接会话默认维持6个小时，如果您超过6小时没有任何操作，连接会自动断开，您需要重新连接实例。

Workbench支持以下功能：

-   WebSSH

    通过安全访问协议SSH登录Linux实例和安装了Cygwin等仿GNU系统的Windows实例。

-   WebRDP

    登录开启了远程桌面服务的Windows实例和Linux实例。

    **说明：** 如果通过远程桌面（RDP）连接实例，请保证公网带宽大于等于5 Mbit/s，否则远程桌面会卡顿。

-   GuestOS文件管理

    提供可视化的目录和文件管理服务，支持对文本文件进行增删改查操作。


## 操作步骤

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。

2.  在左侧导航栏，选择**实例与镜像** \> **实例**。

3.  在顶部菜单栏左上角处，选择地域。

4.  在**实例列表**页面，找到需要连接的实例，单击该实例对应**操作**列下的**远程连接**。

5.  在弹出的**远程连接与命令**对话框中，单击**Workbench远程连接**对应的**立即登录**。

6.  输入信息登录实例。

    -   如果使用终端连接（SSH），配置项如下表所示。

        |配置项|说明|
        |---|--|
        |**资源组**|自动填充，您也可以切换至其它资源组连接其它实例。|
        |**区域**|自动填充，您也可以切换至其它地域连接其它实例。|
        |**实例**|自动填充，您也可以手动输入实例IP或名称搜索其它实例。|
        |**网络连接**|选择连接方式：         -   专有网络实例支持通过公网IP和私网IP连接。
        -   经典网络实例支持通过公网IP和内网IP连接。 |
        |**连接协议**|选择**终端连接（SSH）**。|
        |**端口**|输入需要连接的端口，SSH终端连接服务的默认端口为22。|
        |**用户名**|输入用户名，例如root。|
        |**认证方式**|选择认证方式，支持以下方式：         -   **密码认证**：需要继续输入登录密码。
        -   **证书认证**：需要继续输入或上传证书。如果证书已加密，还需要输入解密口令。 |
        |**语言环境**|选择访问远程主机偏好的语言，偏好语言影响输出的内容。Workbench会自动探测您远程主机的语言设置并进行合适的配置。|
        |**字符集**|选择访问远程主机偏好的字符集，偏好字符集影响输出内容的显示结果。Workbench会自动探测您远程主机的字符集设置并进行合适的配置。|

    -   如果使用远程桌面（RDP），配置项如下表所示。

        |配置项|说明|
        |---|--|
        |**资源组**|自动填充，您也可以切换至其它资源组连接其它实例。|
        |**区域**|自动填充，您也可以切换至其它地域连接其它实例。|
        |**实例**|自动填充，您也可以手动输入实例IP或名称搜索其它实例。|
        |**网络连接**|选择连接方式：         -   专有网络实例支持通过公网IP和私网IP连接。
        -   经典网络实例支持通过公网IP和内网IP连接。 |
        |**连接协议**|选择**远程桌面（RDP）**。|
        |**端口**|输入需要连接的端口，RDP远程桌面服务的默认端口为3389。|
        |**用户名**|输入用户名，例如Administrator。|
        |**密码**|输入登录密码。|

7.  单击**确定**。


## 常见问题

无法连接实例时，您可以自行排查，详情请参见[远程连接FAQ]()和[GuestOS常见问题与修复方案](https://help.aliyun.com/document_detail/175789.html)。

