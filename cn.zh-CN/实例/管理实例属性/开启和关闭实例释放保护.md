# 开启和关闭实例释放保护

如果您的按量付费实例承载了关键业务，可以为按量付费实例开启实例释放保护，防止手动释放按量付费实例，有效避免因操作疏忽、团队成员沟通不及时等原因造成不可挽回的后果。本文为您介绍如何开启和关闭实例释放保护，查看实例的保护状态，并演示了保护效果。

待操作的实例为按量付费实例。

实例释放保护不能阻止因合理原因自动执行的释放行为，包括但不限于：

-   账号欠费超过15天，实例被自动释放。
-   实例设置了自动释放时间，到期后被自动释放。
-   实例存在安全合规风险，被停止或释放。
-   实例由弹性伸缩自动创建，在缩容时被移出伸缩组并释放。

实例释放保护的效果示例如下所示：

-   在控制台手动释放实例时，自动忽略开启实例释放保护的实例。

    ![实例释放保护警告信息](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5114359951/p35403.png)

-   在控制台手动释放实例时，如果待释放的所有实例都开启了实例释放保护，不能执行释放。

    ![全部开启释放保护](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5114359951/p132507.png)

-   如果调用DeleteInstance接口释放开启实例释放保护的实例，返回错误码`InvalidOperation.DeletionProtection`。

## 创建实例时开启实例释放保护

本步骤重点介绍实例释放保护相关的选项，如需了解其它配置，请参见[使用向导创建实例](/cn.zh-CN/实例/创建实例/使用向导创建实例.md)。

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。

2.  在左侧导航栏，选择**实例与镜像** \> **实例**。

3.  在顶部菜单栏左上角处，选择地域。

4.  在**实例列表**页面，单击**创建实例**。

5.  在**基础配置**页面，**付费模式**配置为**按量付费**，根据需要配置其余选项，然后单击**下一步：网络和安全组**。

6.  在**网络和安全组**页面，根据需要配置所有选项，然后单击**下一步：系统配置**。

7.  在**系统配置**页面，选中**防止通过控制台或API误删除释放**，根据需要配置其余选项，然后单击**下一步：分组设置**。

    ![创建实例时开启实例释放保护](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5114359951/p35416.png)

8.  根据需要配置其余选项，直至成功创建实例。


调用RunInstances或CreateInstance接口创建实例时，您可以通过DeletionProtection控制是否开启实例释放保护。

## 修改实例释放保护属性

您也可以修改现有实例的信息，开启或关闭实例释放保护。

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。

2.  在左侧导航栏，选择**实例与镜像** \> **实例**。

3.  在顶部菜单栏左上角处，选择地域。

4.  在**实例列表**页面，选择一种方式修改实例释放保护属性。

    -   修改一台实例：找到待修改的实例，在**操作**列，单击**更多** \> **实例设置** \> **修改实例释放保护**。
    -   修改一台或多台实例：选中多台实例，在页面底部，单击**更多** \> **实例设置** \> **修改实例释放保护**。
5.  根据需要打开或关闭**实例释放保护**。

6.  单击**确定**。


调用ModifyInstanceAttribute修改实例信息时，您可以通过DeletionProtection控制是否开启实例释放保护。

## 查看实例释放保护开启状态

1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。

2.  在左侧导航栏，选择**实例与镜像** \> **实例**。

3.  在顶部菜单栏左上角处，选择地域。

4.  在**实例列表**页面，选择一种方式查看实例详情。

    -   在**实例ID/名称**列，单击待查看实例的实例ID。
    -   找到待查看的实例，在**操作**列，单击**管理**。
5.  在**实例详情**页面，查看**其它信息**下的**释放保护**。

    ![查看实例释放保护开启状态](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1799693061/p35419.png)


**相关文档**  


[DeleteInstance](/cn.zh-CN/API参考/实例/DeleteInstance.md)

[RunInstances](/cn.zh-CN/API参考/实例/RunInstances.md)

[CreateInstance](/cn.zh-CN/API参考/实例/CreateInstance.md)

[ModifyInstanceAttribute](/cn.zh-CN/API参考/实例/ModifyInstanceAttribute.md)

