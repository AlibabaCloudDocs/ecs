---
keyword: [阿里云, 快照节约成本, 存储包, 文件系统, 备份]
---

# 快照FAQ

本文汇总了使用云服务器ECS快照时的常见问题。

-   高频问题
    -   [一块云盘的首次全量快照如何统计容量？](#section_h7p_t3y_viq)
    -   [如何查看不同地域下快照价格？](#section_nom_iuk_an9)
    -   [快照有免费使用额度吗？](#section_h58_338_rau)
    -   [ECS实例快照能否下载或者导出到本地？](#section_1ff_9s6_3i5)
-   对象存储OSS相关问题
    -   [如果我已经开通了OSS，快照会自动存到我的OSS Bucket吗？](/intl.zh-CN/快照/快照FAQ.md)
    -   [使用快照创建了自定义镜像后，可以将镜像存到OSS Bucket吗？](#section_agb_789_ug8)
-   计费问题
    -   [快照采用什么计费方式，有案例吗？](#section_svk_hax_cq5)
    -   [如何查看不同地域下快照价格？](#section_nom_iuk_an9)
    -   [账号欠费对快照有什么影响？](#section_qs5_lyg_4gb)
    -   [快照使用相对频繁的话我如何降低使用成本？](#section_75v_zgn_06k)
    -   [快照有免费使用额度吗？](#section_h58_338_rau)
-   快照类型和块存储类型问题
    -   [手动快照和自动快照有区别或冲突吗？](#section_vj5_5ws_ngb)
    -   [本地盘支持创建快照吗？](#section_8bp_ymj_xsh)
    -   [用加密数据盘创建快照并生成镜像，无法共享镜像怎么办？](#section_m0o_tpa_pb2)
-   快照容量问题
    -   [一块云盘的首次全量快照如何统计容量？](#section_h7p_t3y_viq)
    -   [在ECS实例内删除文件会减少空间占用吗？](#section_akt_4yg_4gb)
    -   [为什么快照容量大于文件系统内看到的数据量？](#section_rr2_pyg_4gb)
    -   [文件系统与普通云盘和快照有什么关系？](#section_tsa_qqu_wdx)
-   删除快照问题
    -   [我如何保留快照，避免被阿里云删除？](#section_wj5_5ws_ngb)
    -   [我如何删除快照，降低备份使用成本？](#section_pjl_hqz_ngb)
    -   [更换系统盘、实例到期或释放云盘后，自动快照会被删除吗？](#section_ck5_5ws_ngb)
    -   [如何删除已创建了镜像、云盘的快照？](#section_hji_juh_uhk)
    -   [删除快照链列表内的一份快照，为什么提示我关联了“RequestId: xxx”？](#section_72i_6dy_wdp)
-   自动快照策略问题
    -   [如果我用自动快照创建自定义镜像或云盘，执行快照策略会失败吗？](#section_xj5_5ws_ngb)
    -   [一块云盘能否设置多个自动快照策略？](#section_dx2_bzg_4gb)
-   使用快照回滚云盘问题
    -   [怎么避免错误操作引起的数据丢失？](#section_oou_9ap_jvp)
    -   [更换系统盘后，历史系统盘快照能否用于回滚新的系统盘？](#section_hpz_qkh_mgb)
    -   [之前实例的地域为中国杭州，数据盘有快照。实例到期释放后我在中国杭州地域又新购了一台实例，能否回滚到之前的实例？](#section_c7y_3ij_f53)
    -   [服务器下的快照无法回滚，是什么原因？](#section_2sn_6vw_p3l)
-   快照与镜像相关问题
    -   [快照和镜像有什么不同？有什么关联？](#section_bmh_2xf_3ds)
    -   [如何将A账号的快照数据迁移到B账号下？](#section_ed5_k10_dzu)
    -   [数据盘快照可以创建自定义镜像吗？](#section_lyx_6pb_932)
    -   [ECS实例快照能否下载或者导出到本地？](#section_1ff_9s6_3i5)
    -   [删除快照链列表内的一份快照，为什么提示我关联了“RequestId: xxx”？](#section_72i_6dy_wdp)

## 如果我已经开通了OSS，快照会自动存到我的OSS Bucket吗？

不会自动保存到已有的OSS Bucket。快照存放的位置与您自建的OSS Bucket相互独立，您无需为快照创建新的Bucket。

## 使用快照创建了自定义镜像后，可以将镜像存到OSS Bucket吗？

可以。您可以通过导出镜像的方式，镜像会导出到您设置的OSS Bucket中供您下载。详细步骤请参见[导出镜像](/intl.zh-CN/镜像/自定义镜像/导出镜像.md)。但是，自定义镜像无法直接存储到OSS Bucket。

## 快照采用什么计费方式，有案例吗？

快照实行按量付费计费方式，单GiB价格与OSS标准型存储一致，单位为USD/GiB/月。阿里云各地域的快照价格表请参见[云服务器ECS产品详情页](https://www.alibabacloud.com/product/ecs)。

有关按量付费的案例，请参见[快照计费](/intl.zh-CN/产品定价/计费项/快照计费.md)。

## 如何查看不同地域下快照价格？

单GiB价格与OSS标准型存储一致，单位为USD/GiB/月。阿里云各地域的快照价格表请参见[云服务器ECS产品详情页](https://www.alibabacloud.com/product/ecs)的定价页面。向下滚动鼠标至**快照价格**处，根据地域查看价格列表。您也可以单击**Download price**下载CSV或者JSON格式的价格列表。

![Download price](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9355319951/p51569.png)

## 账号欠费对快照有什么影响？

欠费后24小时内会停用快照服务，快照保留情况和欠费时长有关。更多信息，请参见[欠费处理](/intl.zh-CN/产品定价/计费项/快照计费.mdsection_plm_hrv_rpf)。

## 快照使用相对频繁的话我如何降低使用成本？

建议您保留合适数量的快照并定时删除不再需要的快照。更多详情，请参见[优化快照使用成本](/intl.zh-CN/快照/使用快照/优化快照使用成本.md)。

## 快照有免费使用额度吗？

暂时没有。快照为计费服务，一旦使用就会产生计费账单。有关快照计费的更多详情，请参见[快照计费](/intl.zh-CN/产品定价/计费项/快照计费.md)。

## 手动快照和自动快照有区别或冲突吗？

没有。本质上，手动快照和自动快照都是某一时间点一块云盘的数据状态文件。但是，如果某一块云盘正在创建自动快照时，您需要等待自动快照完成后，才能手动创建快照。

## 本地盘支持创建快照吗？

不支持。建议您在应用层做好数据冗余处理，或者为集群创建部署集，提高应用的高可用性。

## 用加密数据盘创建快照并生成镜像，无法共享镜像怎么办？

为保证数据的私密性，使用加密快照创建的自定义镜像无法共享镜像。建议您使用非加密快照创建自定义镜像，然后共享给其他用户。

## 一块云盘的首次全量快照如何统计容量？

云盘创建的第一份快照为全量快照，备份了该云盘上某一时刻的所有数据，快照容量等于云盘的已使用的容量。例如某云盘总容量为200GiB，已使用122GiB，则首次全量快照的大小为122GiB。更多详情，请参见[增量快照](/intl.zh-CN/快照/增量快照.md)和[查看快照容量](/intl.zh-CN/快照/使用快照/查看快照容量.md)。

## 在ECS实例内删除文件会减少空间占用吗？

不会。删除文件操作相当于在需要删除的文件头部做删除标记，并不会减少云盘本身的空间占用。

## 为什么快照容量大于文件系统内看到的数据量？

-   问题现象：您在ECS实例内删除文件后再创建快照，发现快照容量并没有变小，或者快照比从文件系统查询到的云盘占用空间大。
-   原因分析：格式化文件系统操作、删除文件操作以及写入数据操作都会使得云盘空块数量不断减少，减弱了创建快照时消除空块的能力。因此，您看到快照容量比文件系统内展示的数据量要大。以下原因可能造成文件系统与快照大小不一致：
    -   文件系统的元数据会占用磁盘空间。
    -   文件系统在初始化阶段被写入大量数据块（Block，指磁盘的逻辑块地址LBA被块存储划分为相同大小的块），写入数据操作会占用磁盘空间。
    -   文件系统为了降低性能消耗，删除文件时只在文件属性中创建弃用标记。磁盘无法感知删除指令，数据块仍然是已分配状态，同时数据块会被拷贝到快照中，导致快照容量大于文件系统。
    -   虚拟化驱动KVM的Virtio-block和Xen的Block-front等模块不支持TRIM指令（磁盘I/O指令，提示逻辑块地址LBA上的某段数据不再使用，可以被删除），磁盘无法感知数据可以被删除。

## 文件系统与普通云盘和快照有什么关系？

您在磁盘分区上创建的是文件系统。文件系统负责管理磁盘空间，管理操作最终均转化为磁盘的I/O请求。磁盘会记录数据块状态，按需将数据一并拷贝到对象存储OSS，这就是创建快照的过程。文件系统与快照之间的关系如下图所示：

![文件系统与云盘和快照的关系](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9355319951/p39434.png)

**说明：** 上图中，只要被写过数据的数据块，即使在磁盘中的相关文件已经被删除，数据块仍会被记录到快照中。文件系统中所谓删除只是在需要删除的文件头部做个标记，让您知道这块空间可以利用了，不会减少磁盘本身的空间占用。

## 我如何保留快照，避免被阿里云删除？

-   手动快照：无论您是否执行了释放云盘或者释放实例操作，阿里云均不会删除您自行创建的快照。
-   自动快照：可以修改自动快照策略的**保留时间**属性为**持续保留**。当云盘的自动快照达到上限后，创建时间最早的自动快照会被自动删除。详细步骤请参见[修改自动快照策略](/intl.zh-CN/快照/使用自动快照策略/修改自动快照策略.md)。有关快照配额请参见[使用限制](/intl.zh-CN/产品简介/使用限制.md)。

## 我如何删除快照，降低备份使用成本？

-   手动快照：自行删除手动快照。
-   自动快照：您可以自行删除自动快照。或者等待云盘达到快照配额后，创建时间最早的自动快照会被系统删除。

## 更换系统盘、实例到期或释放云盘后，自动快照会被删除吗？

-   自动快照策略设置了**自动快照随磁盘释放**属性：自动快照会被删除。
-   自动快照策略取消了**自动快照随磁盘释放**属性：自动快照遵循快照策略的保留时间设置。如有需要，您可以[修改自动快照策略](/intl.zh-CN/快照/使用自动快照策略/修改自动快照策略.md)。

## 如何删除已创建了镜像、云盘的快照？

-   创建过云盘的快照，可以单独删除。删除快照后，您无法操作依赖于原始快照数据状态的业务，例如[重新初始化云盘](/intl.zh-CN/块存储/云盘/重新初始化云盘/重新初始化系统盘.md)。
-   创建过自定义镜像的快照，必须预先删除所对应的镜像，才能删除快照。
-   创建过实例的镜像，可以单独删除。删除镜像后，您无法操作依赖于原始快照数据状态的业务，例如[重新初始化云盘](/intl.zh-CN/块存储/云盘/重新初始化云盘/重新初始化系统盘.md)。

## 如果我用自动快照创建自定义镜像或云盘，执行快照策略会失败吗？

不会。

## 一块云盘能否设置多个自动快照策略？

不能。

## 怎么避免错误操作引起的数据丢失？

在有操作风险的场景中，您可以提前创建快照备份数据。例如修改关键系统文件、实例从经典网络迁移至专有网络VPC、日常数据备份、实例误释放恢复、预防网络攻击、更换操作系统、为生产环境提供数据支撑和其他具有操作风险的场景。出现错误操作时，您可以及时回滚云盘，降低风险。详情请参见[创建一个云盘快照](/intl.zh-CN/快照/使用快照/创建一个云盘快照.md)和[使用快照回滚云盘](/intl.zh-CN/快照/使用快照/使用快照回滚云盘.md)。

## 更换系统盘后，历史系统盘快照能否用于回滚新的系统盘？

不能。

## 之前实例的地域为中国杭州，数据盘有快照。实例到期释放后我在中国杭州地域又新购了一台实例，能否回滚到之前的实例？

不能，使用快照回滚云盘需要回滚到原来的实例。但您可以利用之前数据盘的快照创建云盘，将云盘挂载到新的实例上。具体步骤，请参见[使用快照创建云盘](/intl.zh-CN/块存储/云盘/创建云盘/使用快照创建云盘.md)和[挂载数据盘](/intl.zh-CN/块存储/云盘/挂载数据盘.md)。

## 服务器下的快照无法回滚，是什么原因？

您可以根据回滚云盘的报错信息，检查快照情况。常见问题及解决方案，请参见[块存储FAQ](/intl.zh-CN/块存储/块存储FAQ.md)回滚云盘相关问题。

## 快照和镜像有什么不同？有什么关联？

快照和镜像的差异如下：

-   镜像可直接创建ECS实例，快照不可以。
-   镜像可通过[复制镜像](/intl.zh-CN/镜像/自定义镜像/复制镜像.md)跨地域恢复实例数据，快照不可以。
-   快照可以是ECS实例系统盘或数据盘的数据备份，而镜像一定包含ECS实例系统盘的数据。
-   快照适用于备份云盘数据，镜像适用于创建一台或多台新的ECS实例。

快照和镜像的关联如下：

-   使用实例创建自定义镜像时，ECS会为实例的每块云盘创建快照，即自定义镜像包含ECS实例所有云盘的快照。具体步骤，请参见[使用实例创建自定义镜像](/intl.zh-CN/镜像/自定义镜像/创建自定义镜像/使用实例创建自定义镜像.md)。
-   使用系统盘快照，也可以创建自定义镜像。具体步骤，请参见[使用快照创建自定义镜像](/intl.zh-CN/镜像/自定义镜像/创建自定义镜像/使用快照创建自定义镜像.md)。

## 如何将A账号的快照数据迁移到B账号下？

快照不支持迁移。如果您有需要，可将快照制作成镜像，然后共享到其他账号下。更多详情，请参见[使用快照创建自定义镜像](/intl.zh-CN/镜像/自定义镜像/创建自定义镜像/使用快照创建自定义镜像.md)和[共享或取消共享镜像](/intl.zh-CN/镜像/自定义镜像/共享或取消共享镜像.md)。

如果您需要将A账号数据盘快照迁移到B账号，可按以下步骤操作。

1.  为数据盘快照的原实例创建镜像。具体步骤，请参见[使用快照创建自定义镜像](/intl.zh-CN/镜像/自定义镜像/创建自定义镜像/使用快照创建自定义镜像.md)。
2.  共享镜像给B账号。具体步骤，请参见[共享或取消共享镜像](/intl.zh-CN/镜像/自定义镜像/共享或取消共享镜像.md)。
3.  在B账号中，使用该镜像新购一台按量付费实例。具体步骤，请参见[使用自定义镜像创建实例](/intl.zh-CN/实例/创建实例/使用自定义镜像创建实例.md)。
4.  为新购实例的数据盘创建快照。具体步骤，请参见[创建一个云盘快照](/intl.zh-CN/快照/使用快照/创建一个云盘快照.md)。
5.  释放该新购实例。具体步骤，请参见[释放实例](/intl.zh-CN/实例/管理实例/释放实例.md)。

## 数据盘快照可以创建自定义镜像吗？

不可以。创建自定义镜像的快照云盘属性必须是系统盘。

## ECS实例快照能否下载或者导出到本地？

快照不能下载或者导出到本地。您可以利用快照创建镜像，再导出镜像。具体步骤，请参见[使用快照创建自定义镜像](/intl.zh-CN/镜像/自定义镜像/创建自定义镜像/使用快照创建自定义镜像.md)和[导出镜像](/intl.zh-CN/镜像/自定义镜像/导出镜像.md)。您还可以利用运维编排服务OOS的[ACS-ECS-BulkyCreateAndExportImage](https://oos.console.aliyun.com/cn-hangzhou/template/public/detail/ACS-ECS-BulkyCreateAndExportImage)运维模板，在对应地域下选择一个或多个实例批量创建并导出自定义镜像到OSS Bucket，然后在对象存储OOS控制台下载自定义镜像。

## 删除快照链列表内的一份快照，为什么提示我关联了“RequestId: xxx”？

您的快照创建过自定义镜像，需要先删除这个自定义镜像才可以删除快照。具体步骤，请参见[删除自定义镜像](/intl.zh-CN/镜像/自定义镜像/删除自定义镜像.md)。

