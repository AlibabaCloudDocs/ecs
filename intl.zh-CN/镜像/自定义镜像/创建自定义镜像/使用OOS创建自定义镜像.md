# 使用OOS创建自定义镜像

运维编排服务OOS为创建自定义镜像的场景提供了公共模版ACS-ECS-CreateAndCopyImage，支持一键完成发送远程命令、创建自定义镜像、复制镜像等操作。

您可以在OOS控制台查看公共模板的信息，例如执行模板时的默认流程等。具体操作，请参见[查看公共模板信息]()。

## 操作步骤

1.  进入运维任务设置页面。

    1.  登录[ECS管理控制台](https://ecs.console.aliyun.com)。

    2.  在左侧导航栏，选择**实例与镜像** \> **镜像**。

    3.  在顶部菜单栏左上角处，选择地域。

    4.  在**创建镜像**区域，单击**运维编排创建**。

2.  在**创建或更新镜像**页面中，完成执行设置。

    1.  保持默认选中**从已有实例创建镜像**。

    2.  完成通用设置。

        输入镜像名称和描述，并选择执行相关操作时权限的来源。

    3.  完成镜像分发设置。

        |设置项|说明|
        |---|--|
        |**需要复制的目标地域**|在当前地域创建镜像后，自动将镜像复制到一个或多个地域。|
        |**镜像共享账号ID**|创建镜像后，自动将镜像共享给一个或多个其他阿里云账号。|

    4.  选择实例。

        基于选择的实例创建自定义镜像。创建自定义镜像时，系统会为云盘自动生成快照，因此保有自定义镜像会产生快照费用。

    5.  输入远程命令。

        在创建自定义镜像前向实例发送的远程命令，具体效果由命令内容决定，例如您可以在实例上安装软件、记录运维任务执行时间等。

    6.  设置高级选项。

        |设置项|说明|
        |---|--|
        |**伸缩组配置ID**|创建镜像后，自动使用该镜像更新指定伸缩组配置中的镜像参数。|
        |**标签**|为本次任务绑定标签，方便后续筛选。|
        |**保存模板**|将本次任务的设置保存为自定义模板，方便后续重复执行。|

    7.  单击**立即执行**。


任务状态变为**运行中**，您可以单击执行ID查看输出参数、执行日志等信息。任务状态变为**成功**后即表示自定义镜像创建成功，并按设置完成了复制镜像等操作。

