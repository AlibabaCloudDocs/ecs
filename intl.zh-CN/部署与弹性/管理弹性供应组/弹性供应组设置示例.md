# 弹性供应组设置示例

本文介绍如何根据具体应用场景中的需求设置弹性供应组。

## 机器学习场景示例

假设您计划在未来一周完成一项机器学习任务，用于分析住房抵押贷款的风险因素，对实例集群的需求如下：

-   目标地域：华东1（杭州）。
-   实例配备NVIDIA V100 GPU计算卡，单实例GPU显存不大于32 GB。
-   目标容量：20台实例。
-   尽量节省成本，只用抢占式实例，可以接受集群规模不达标。
-   任务结束后释放实例。

考虑以上需求，弹性伸缩组的设置示例如下表所示。

|配置区域|配置参数|示例说明|
|----|----|----|
|**容量配置**|**目标容量**|由于目标容量为20台实例，且仅使用抢占式实例，设置如下：-   单位选择**实例个数**。
-   容量设置为**20**。 |
|**实例配置**|**实例配置**|由于要求实例配备NVIDIA V100 GPU计算卡，单机GPU显存不大于32 GB：1.  符合要求的实例规格为ecs.gn6v-c8g1.2xlarge、ecs.gn6e-c12g1.3xlarge。

**说明：** 详细的实例规格信息，请参见[实例规格族](/intl.zh-CN/实例/实例规格族.md)。

2.  查询在华东1（杭州）地域中，仅可用区H、可用区I中有ecs.gn6v-c8g1.2xlarge、ecs.gn6e-c12g1.3xlarge的库存。

**说明：** 您可以前往[ECS实例可购买地域](https://ecs-buy.aliyun.com/instanceTypes/#/instanceTypeByRegion)，查看实例在各地域的可购情况。


根据可用区和实例规格情况，即可增加实例配置：

1.  增加第1条实例配置：
    -   指定华东1（杭州）可用区H中的交换机。
    -   增加实例规格ecs.gn6v-c8g1.2xlarge、ecs.gn6e-c12g1.3xlarge。
2.  增加第2条实例配置：
    -   指定华东1（杭州）可用区I中的交换机。
    -   增加实例规格ecs.gn6v-c8g1.2xlarge、ecs.gn6e-c12g1.3xlarge。

增加实例配置后，形成以下资源池：

-   可用区H+ecs.gn6v-c8g1.2xlarge
-   可用区H+ecs.gn6e-c12g1.3xlarge
-   可用区I+ecs.gn6v-c8g1.2xlarge
-   可用区I+ecs.gn6e-c12g1.3xlarge |
|**供应策略**|选择**成本最优策略**。弹性供应组启动后，会使用成本最低的资源池交付实例集群。|
|**高级选项**|**供应组类型**|由于需要尽量节省成本，可以接受集群不达标，因此选择**一次性交付**。|
|**启动时间**、**结束时间**|按照计划的未来一周设置启动时间和结束时间。|
|**组内实例关停设置**|-   由于需要任务结束后释放实例，选中**供应组过期时关停供应组内实例**。
-   由于需要尽量节省成本，选中**超过容量时关停供应组内实例**。 |

## 购票网站场景示例

假设您需要搭建一个购票网站，提供覆盖日常和高峰时段的购票服务，对实例集群的需求如下：

-   目标地域：华东1（杭州）。
-   单实例vCPU个数不大于8。
-   目标容量：80 vCPU。
-   最低容量：60 vCPU。
-   在集群最低容量基础上优化网站访问体验，尽量节省成本。
-   具有容灾能力。

考虑以上需求，弹性伸缩组的设置示例如下表所示。

|配置区域|配置参数|示例说明|
|----|----|----|
|**容量配置**|**目标容量**|由于目标容量为80 vCPU，最低容量为60，设置如下：-   单位选择**vCPU个数**。
-   容量设置为80。
-   选中**使用按量实例提供部分算力**。 |
|**按量实例容量**|容量设置为60，使用按量实例容量满足最低容量需求。|
|**实例配置**|**实例配置**|实例规格族考虑适合搭建Web前端服务器的c6，由于要求单实例vCPU个数不大于8：1.  符合要求的实例规格为ecs.c6.large、ecs.c6.xlarge、ecs.c6.2xlarge。

**说明：** 详细的实例规格信息，请参见[实例规格族](/intl.zh-CN/实例/实例规格族.md)。

2.  查询在华东1（杭州）地域中，可用区H、可用区I、可用区J中有ecs.c6.large、ecs.c6.xlarge、ecs.c6.2xlarge的库存。

**说明：** 您可以前往[ECS实例可购买地域](https://ecs-buy.aliyun.com/instanceTypes/#/instanceTypeByRegion)，查看实例在各地域的可购情况。


根据可用区和实例规格情况，即可增加实例配置：

1.  增加第1条实例配置：
    -   指定华东1（杭州）可用区H中的交换机。
    -   增加实例规格ecs.c6.large、ecs.c6.xlarge、ecs.c6.2xlarge。
2.  增加第2条实例配置：
    -   指定华东1（杭州）可用区I中的交换机。
    -   增加实例规格ecs.c6.large、ecs.c6.xlarge、ecs.c6.2xlarge。
3.  增加第3条实例配置：
    -   指定华东1（杭州）可用区J中的交换机。
    -   增加实例规格ecs.c6.large、ecs.c6.xlarge、ecs.c6.2xlarge。

增加实例配置后，形成以下资源池：

-   可用区H+ecs.c6.large
-   可用区H+ecs.c6.xlarge
-   可用区H+ecs.c6.2xlarge
-   可用区I+ecs.c6.large
-   可用区I+ecs.c6.xlarge
-   可用区I+ecs.c6.2xlarge
-   可用区J+ecs.c6.large
-   可用区J+ecs.c6.xlarge
-   可用区J+ecs.c6.2xlarge |
|**供应策略**|选择**多可用区均衡策略**。弹性供应组启动后，尝试在多个可用区中均衡地创建实例，规避单可用区库存不足导致实例创建失败，可以有效提高应用容灾能力。|
|**高级选项**|**供应组类型**|由于需要持续提供购票服务，因此选择**持续保持**。|
|**启动时间**、**结束时间**|由于需要持续提供购票服务，指定弹性供应组立即启动并无限期保留。|
|**组内实例关停设置**|由于需要尽量节省成本，选中**超过容量时关停供应组内实例**。|

由于目标容量单位为vCPU个数，每台实例的权重和实例规格的vCPU个数有关，因此各实例规格还有对应权重单价，示例如下表所示。

**说明：** 表中价格仅为示例，请以售卖页中的实时价格为准。

|实例规格|vCPU|按量价格（USD）|权重|权重单价（USD）|
|----|----|---------|--|---------|
|ecs.c6.large|2|0.06/时|2|0.03/时|
|ecs.c6.xlarge|4|0.121/时|4|0.03025/时|
|ecs.c6.2xlarge|8|0.241/时|8|0.030125/时|

弹性供应组在交付实例集群时，首先尝试满足多可用区均衡策略，在多个可用区中均衡地创建实例。同时尽量使用权重单价较低的方案，如果各实例规格的权重单价相同，则随机选择一种方案。

